<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Setting up and using example data • BuzzardsBay</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Setting up and using example data">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">BuzzardsBay</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0.9031</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/example-data.html">Setting up and using example data</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/UMassCDS/BuzzardsBay/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Setting up and using example data</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/UMassCDS/BuzzardsBay/blob/main/vignettes/example-data.Rmd" class="external-link"><code>vignettes/example-data.Rmd</code></a></small>
      <div class="d-none name"><code>example-data.Rmd</code></div>
    </div>

    
    
<p>Example data files are included with the <strong>BuzzardsBay</strong>
package to facilitate code development and testing. You can also use
this example data to play with the package functions independent of a
pre-existing or important data archive.</p>
<div class="section level3">
<h3 id="setup">Setup<a class="anchor" aria-label="anchor" href="#setup"></a>
</h3>
<p>Load the package:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://umasscds.github.io/BuzzardsBay/">BuzzardsBay</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="all-the-example-files">All the example files<a class="anchor" aria-label="anchor" href="#all-the-example-files"></a>
</h3>
<p>To put all the example data in the package in one large example data
store with many files:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">paths</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/setup_example_dir.html">setup_example_dir</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>by default it will be set up in a path created by
<code><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir()</a></code> but you can also use the <code>parent_dir</code>
argument to specify where you want it created.</p>
</div>
<div class="section level3">
<h3 id="a-subset-of-example-files">A subset of example files<a class="anchor" aria-label="anchor" href="#a-subset-of-example-files"></a>
</h3>
<p>You can use combinations of the filter arguments to specify a subset
of the data you want to include in the example data store. This will be
quicker and use less disk space than including all the files.</p>
<p>For example to get a single deployment:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">paths</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/setup_example_dir.html">setup_example_dir</a></span><span class="op">(</span>site_filter <span class="op">=</span>  <span class="st">"RB1"</span>, deployment_filter <span class="op">=</span> <span class="st">"2023-06-09"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">paths</span><span class="op">$</span><span class="va">deployments</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/qc_deployment.html">qc_deployment</a></span><span class="op">(</span><span class="va">paths</span><span class="op">$</span><span class="va">deployments</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<p>Or to get all the deployments for site WH1X:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">paths</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/setup_example_dir.html">setup_example_dir</a></span><span class="op">(</span>site_filter <span class="op">=</span>  <span class="st">"WH1X"</span>, delete_old <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">paths</span><span class="op">$</span><span class="va">deployments</span><span class="op">)</span></span></code></pre></div>
<p><code>delete_old = TRUE</code> was added to clear out the prior
example data and is useful if you want to reset the example - perhaps
clearing out previously run reports and QC files.</p>
<hr>
</div>
<div class="section level2">
<h2 id="available-example-datasets">Available example datasets<a class="anchor" aria-label="anchor" href="#available-example-datasets"></a>
</h2>
<p>These are grouped into examples for the analysis module and the qc
module. The formats of the two sets of files is different so each
example deployment will only work for one of the two sets of
functions.</p>
<div class="section level3">
<h3 id="aggregation-and-analysis-module">Aggregation and Analysis Module<a class="anchor" aria-label="anchor" href="#aggregation-and-analysis-module"></a>
</h3>
<p>For these deployments the test data consists of the final QC CSV and
YAML files but NOT the calibration files. They are to test
<code><a href="../reference/report_site.html">report_site()</a></code>,<code><a href="../reference/check_site.html">check_site()</a></code>, and
<code><a href="../reference/stitch_site.html">stitch_site()</a></code>. They don’t work with
<code><a href="../reference/qc_deployment.html">qc_deployment()</a></code>.</p>
<div class="section level4">
<h4 id="ab2">AB2<a class="anchor" aria-label="anchor" href="#ab2"></a>
</h4>
<p><em>2024-08-16, 2024-08-27, 2024-09-05</em> 3 consecutive
deployments</p>
</div>
<div class="section level4">
<h4 id="e33">E33<a class="anchor" aria-label="anchor" href="#e33"></a>
</h4>
<p><em>2024-07-09, 2024-07-23</em> 2 consecutive deployments, second is
two weeks long</p>
</div>
<div class="section level4">
<h4 id="wh1x">WH1X<a class="anchor" aria-label="anchor" href="#wh1x"></a>
</h4>
<p><em>2023-06-09, 2023-06-16, 2023-06-23</em> 3 consecutive
deployments</p>
</div>
</div>
<div class="section level3">
<h3 id="qc-module">QC Module<a class="anchor" aria-label="anchor" href="#qc-module"></a>
</h3>
<p>These files work with <code><a href="../reference/qc_deployment.html">qc_deployment()</a></code>. There are a ton
of files here to support the three different import types and to
demonstrate issues that have since been resolved.</p>
<div class="section level4">
<h4 id="import-type-0">Import Type 0<a class="anchor" aria-label="anchor" href="#import-type-0"></a>
</h4>
<p>This was the last import type added but I assigned it a 0 as it’s a
fall back simple import. It expects one CSV and one YAML file.</p>
<div class="section level5">
<h5 id="sim-2025-01-04">SIM 2025-01-04<a class="anchor" aria-label="anchor" href="#sim-2025-01-04"></a>
</h5>
<p>“SIM”” is a made up site with data reformatted from another site to
match the simple import inputs.</p>
</div>
</div>
<div class="section level4">
<h4 id="import-type-1---u24-and-u26">Import Type 1 - U24 and U26<a class="anchor" aria-label="anchor" href="#import-type-1---u24-and-u26"></a>
</h4>
<p>This was the original import type supported by the package. These are
based on two separate DO and Cond. loggers. For each logger there is a
CSV with the data and a details text file with metadata from the
calibration.</p>
<div class="section level5">
<h5 id="rb1-2023-06-09">RB1 2023-06-09<a class="anchor" aria-label="anchor" href="#rb1-2023-06-09"></a>
</h5>
<p>First example data for U24 and U26 loggers.</p>
</div>
<div class="section level5">
<h5 id="ob1-2024-05-21-2024-05-31">OB1 2024-05-21, 2024-05-31<a class="anchor" aria-label="anchor" href="#ob1-2024-05-21-2024-05-31"></a>
</h5>
<p>These two were added to resolve an issue where a sensor was swapped
and <code>placments.csv</code> updated to indicate the swap, BUT
<code>qc_deployment)</code> was still throwing errors.</p>
</div>
<div class="section level5">
<h5 id="ob1-2024-07-30">OB1 2024-07-30<a class="anchor" aria-label="anchor" href="#ob1-2024-07-30"></a>
</h5>
<p>The conductivity meter had issues so a fixed (average) salinity was
used for calibration breaking the QC code.</p>
</div>
<div class="section level5">
<h5 id="sb2x-2024-05-15-2024-06-10">SB2X 2024-05-15, 2024-06-10<a class="anchor" aria-label="anchor" href="#sb2x-2024-05-15-2024-06-10"></a>
</h5>
<p>Conductivity was calibrated with a single point calibration on these
two dates instead of the standard 2-point calibration.</p>
</div>
<div class="section level5">
<h5 id="bd1-2024-06-21">BD1 2024-06-21<a class="anchor" aria-label="anchor" href="#bd1-2024-06-21"></a>
</h5>
<p>This sensor produced a weird column name:</p>
<pre><code>From Kristin:
I was working through BD1 and got the error message: 

`Error in qc_deployment(deployment_dir) : The calibration data data is 
missing some expected columns: "High_Range"`

I believe it comes down to the fact that whenever I export .csv files from 
this particular sensor, it names the column "HIgh Range High Range (?S/cm)"
as opposed to the normal "High Range (?S/cm)." If I try to manually adjust
this, it screws up the dates saved in the .csv and I think spawns some other
issues with the code. I am going to try to figure out why this particular
data file exports that heading slightly differently, but could the code be
adjusted to still recognize it if "High Range" is repeated?

If you want to look at the data I'm working with, it's BD1 2024-06-21.</code></pre>
</div>
<div class="section level5">
<h5 id="ob9-2024-07-23">OB9 2024-07-23<a class="anchor" aria-label="anchor" href="#ob9-2024-07-23"></a>
</h5>
<p>Added to resolve a plot y axis limit that expanded to include -888.88
instead of treating that data as NA and thus not plotting it.</p>
<pre><code>"OB9 for 2024-07-23 is a really good example of a dataset that has a sensor 
malfunction written in, so the graphs are difficult to read."
(the sensor error code -888.88 is getting plotted resulting in a massive 
yrange on the plot).</code></pre>
</div>
</div>
<div class="section level4">
<h4 id="type-2-mx801">Type 2 (MX801)<a class="anchor" aria-label="anchor" href="#type-2-mx801"></a>
</h4>
<div class="section level5">
<h5 id="bbc-2025-01-04-2025-01-26-2025-01-27">BBC 2025-01-04, 2025-01-26, 2025-01-27)<a class="anchor" aria-label="anchor" href="#bbc-2025-01-04-2025-01-26-2025-01-27"></a>
</h5>
<p>Example output from the new MX801 logger which has a different format
from the U24 and U26 loggers, and logs both conductivity and DO on one
device. There are several possible calibration possibilities.</p>
<ul>
<li>2025-01-04 (2, 2) - two point calibration for both DO and Cond.
calibration. I think this is the most common type.</li>
<li>2025-01-26 (2, 3)- two points for DO and three points for Cond.
calibration.</li>
<li>2025-01-27 (2, 1) - one point for DO and two points for Cond.
calibration.</li>
</ul>
<p>Note, I think BBC id a fake site. These are real data from short
tests of the loggers.</p>
<p>See: the <a href="./2025/BBC/README.html">BBC README.md file</a> for
more details.</p>
</div>
<div class="section level5">
<h5 id="bbc-2025-02-14">BBC 2025-02-14<a class="anchor" aria-label="anchor" href="#bbc-2025-02-14"></a>
</h5>
<p>More example output from MX801 logger. This one uses different line
endings inside cells than the previous three files.<br>
The change in line endings prevented if from being processed correctly
with <code>parse_mx901_details()</code> prior to bug fixed in
0.1.0.9017.</p>
</div>
</div>
<div class="section level4">
<h4 id="tide-rider">Tide Rider<a class="anchor" aria-label="anchor" href="#tide-rider"></a>
</h4>
<div class="section level5">
<h5 id="wfh-2024-04-09">WFH 2024-04-09<a class="anchor" aria-label="anchor" href="#wfh-2024-04-09"></a>
</h5>
<p>This is the first example of tide rider output I receeived. The
TR_WFH_20240409_TRSX01.csv was from Michael Jakuba and emailed to me by
Kristin Huizenga on 2024-12-05.</p>
<p>It contained high frequency of observations that I resampled at 10
minute intervals. The other calibrated data files are hacked copies from
a separate deployment.<br>
See data-raw/make_fake_tide_rider_calibration_dir.R for how these files
were generated.</p>
<p>I decided to wait until I had real logger and tide rider data
collected at the same time before implementing the tide rider
module.</p>
</div>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Ethan Plunkett, Bradley Compton.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
