<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Run automatic quality control on a deployment — qc_deployment • BuzzardsBay</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Run automatic quality control on a deployment — qc_deployment"><meta name="description" content="qc_deployment() will:
Read the calibrated dissolved oxygen and conductivity output from
HOBOware.
Read and parse the associated Details file.
Reformat and merge the data files.
Add automatic flags, and create columns for manual QC
Write the data and metadata.
If report = TRUE it will call make_deployment_report() to make
and interactive HTML report with plots for QAQC.

"><meta property="og:description" content="qc_deployment() will:
Read the calibrated dissolved oxygen and conductivity output from
HOBOware.
Read and parse the associated Details file.
Reformat and merge the data files.
Add automatic flags, and create columns for manual QC
Write the data and metadata.
If report = TRUE it will call make_deployment_report() to make
and interactive HTML report with plots for QAQC.

"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">BuzzardsBay</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0.9030</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Run automatic quality control on a deployment</h1>

      <div class="d-none name"><code>qc_deployment.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>qc_deployment()</code> will:</p><ol><li><p>Read the calibrated dissolved oxygen and conductivity output from
HOBOware.</p></li>
<li><p>Read and parse the associated Details file.</p></li>
<li><p>Reformat and merge the data files.</p></li>
<li><p>Add automatic flags, and create columns for manual QC</p></li>
<li><p>Write the data and metadata.</p></li>
<li><p>If <code>report = TRUE</code> it will call <code><a href="make_deployment_report.html">make_deployment_report()</a></code> to make
and interactive HTML report with plots for QAQC.</p></li>
</ol></div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">qc_deployment</span><span class="op">(</span><span class="va">dir</span>, report <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-dir">dir<a class="anchor" aria-label="anchor" href="#arg-dir"></a></dt>
<dd><p>The path to a deployment directory to run QC on.  It should
have a <code>Calibration/</code> directory with calibrated DO and conductivity data
associated Details files generated by HOBOware.</p></dd>


<dt id="arg-report">report<a class="anchor" aria-label="anchor" href="#arg-report"></a></dt>
<dd><p>If <code>TRUE</code> (the default) an html report will be generated
with plots to assist the QAQC process.  Set to <code>FALSE</code> to skip generating
the report. See <code><a href="make_deployment_report.html">make_deployment_report()</a></code> to explicitly make the report
as a separate step.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list with items:</p>
<dl><dt>d</dt>
<dd><p>The final tabular data as written to disk.</p></dd>

<dt>md</dt>
<dd><p>A nested list of the metadata.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><code>qc_deployment()</code> assumes the files are arranged in a specific
<a href="https://docs.google.com/document/d/1kJttcEXzpNNknGwjkVwdYHw9LzZyjJ-FaX0CrU7H7NU/edit#heading=h.s6vs4d7vj0cn" class="external-link">file structure</a>.</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p><code>qc_deployment()</code> calls <code><a href="import_calibrated_data.html">import_calibrated_data()</a></code> which currently supports
three completely different import functions.  See <code><a href="import_calibrated_data.html">import_calibrated_data()</a></code>
for documentation on the data formats they each expect.</p>
<p>In all cases input files are looked for within a <code>Calibration</code> sub directory
to the deployment directory (<code>dir</code>).</p>
    </div>
    <div class="section level2">
    <h2 id="supported-import-types">Supported import types<a class="anchor" aria-label="anchor" href="#supported-import-types"></a></h2>



<p>There are currently 3 separate import functions to handle different formats
of the data. They are:</p>
<p><strong>0 - Basic CSV Import</strong></p>
<p>This import requires a CSV file and a YAML (<code>.yml</code>) file. It is intended to
be a fall back / future proof import with a supper simple format.</p>
<p>It should work with input columns names as Hoboware creates when calibrating
the MX801 logger or the U24 and U26 loggers; as well as with the canonical
names:  "Date_Time", "Raw_DO", "Temp_DOLog", "DO", "DO_Pct_Sat",
"High_Range", "Temp_CondLog", "Spec_Cond", "Salinity",
"Depth", "Latitude", and "Longitude".  The last three columns (Depth,
Latitude, and Longitude) are optional.</p>
<p>Note: when combining data from the U24 and U26 loggers into
a single sheet for use with this function the two temperature columns
will have to be manually renamed to "Temp_CondLog", and "Temp_DOLog".</p>
<p>The YAML file will should look something
like this:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>calibration_start<span class="sc">:</span> <span class="dv">2025-01-02</span> <span class="dv">14</span><span class="sc">:</span><span class="dv">50</span><span class="sc">:</span><span class="dv">02</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>calibration_end<span class="sc">:</span> <span class="dv">2025-01-04</span> <span class="dv">15</span><span class="sc">:</span><span class="dv">10</span><span class="sc">:</span><span class="dv">02</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>do_device<span class="sc">:</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>  product<span class="sc">:</span> MX801</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>  serial_number<span class="sc">:</span> <span class="dv">22145888</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a>cond_device<span class="sc">:</span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a>  product<span class="sc">:</span> MX801</span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a>  serial_number<span class="sc">:</span> <span class="dv">22145888</span></span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a>timezone<span class="sc">:</span> EST</span></code></pre><p></p></div>
<p><strong>1 - U24 and U26 loggers</strong></p>
<p>This is the first import that was supported by the <strong>BuzzardsBay</strong> package.
It is for when two loggers (U24 and U26) are used to record the salinity
and dissolved oxygen data.</p>
<p>It expects two CSV (ending in <code>.csv</code>) files along with
two details files (ending in <code>details.txt</code>).</p>
<p>One file of each type should contain <code>DO_</code> somewhere in the name indicating
that it is from a dissolved oxygen logger; and one file of each type should
contain either <code>SAL_</code> or <code>COND_</code> in the name indicating it is from a
salinity/conductivity logger.</p>
<p>The naming requirements are not case sensitive.</p>
<p><strong>2 - MX801</strong></p>
<p>This import works with an excel file created by HOBOware while calibrating
the MX801 combined DO and Salinity logger.</p>
<p>The excel file should be as created by HOBOware.</p>
<p>Run this:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>example_paths <span class="ot">&lt;-</span> <span class="fu">setup_example_dir</span>(<span class="at">site_filter =</span> <span class="st">"BBC"</span>,</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>                                   <span class="at">year_filter =</span> <span class="dv">2025</span>)</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>deployment_dirs <span class="ot">&lt;-</span> example_paths<span class="sc">$</span>deployments</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="fu">print</span>(deployment_dirs)</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a></span></code></pre><p></p></div>
<p>To create example files that can be inspected and used to run this import
e.g. :</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">qc_deployment</span>(deployment_dirs[<span class="dv">1</span>])</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a></span></code></pre><p></p></div>
<p>This import now requires a YAML file (<code>details.yml</code>) it should look something
like this:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>calibration_start<span class="sc">:</span> <span class="dv">2025-01-02</span> <span class="dv">15</span><span class="sc">:</span><span class="dv">50</span><span class="sc">:</span><span class="dv">02</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>calibration_end<span class="sc">:</span> <span class="dv">2025-01-04</span> <span class="dv">13</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">02</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>timezone<span class="sc">:</span> EST</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>serial_number<span class="sc">:</span> <span class="dv">22145899</span></span></code></pre><p></p></div>
<p>Note <code>calibration_start</code> and <code>calibration_end</code> define the start and end
of the deployment window. This is a legacy of the U24 and U26 loggers
where the calibrated window and the deployment window were the same.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span>  <span class="va">paths</span> <span class="op">&lt;-</span> <span class="fu"><a href="setup_example_dir.html">setup_example_dir</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">a</span> <span class="op">&lt;-</span> <span class="fu">qc_deployment</span><span class="op">(</span><span class="va">paths</span><span class="op">$</span><span class="va">deployment</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Ethan Plunkett, Bradley Compton.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

